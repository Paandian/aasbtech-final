(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cefae"],{6284:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("div",[a("v-card",{staticClass:"mx-auto",attrs:{tile:""}},[a("v-img",{staticClass:"white--text",attrs:{position:"bottom",height:"70px",src:i("d999")}},[a("v-card-text",{staticClass:"text-right text-h6 font-weight-black"},[e._v(" CASEFILE LIST ")])],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{dense:"",headers:e.headers,items:e.casefiles,search:e.search},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,s=t.attrs;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g(e._b({attrs:{fab:"",small:"",color:"primary",dark:""}},"v-btn",s,!1),Object.assign({},n,i)),[a("v-icon",[e._v("mdi-plus")])],1)]}}],null,!0)},[a("span",[e._v("ADD CASEFILE")])])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-select",{attrs:{items:e.refType,"item-text":"description","item-value":"name","menu-props":{maxHeight:"400"},label:"DEPARTMENT",hint:"Set the casefile department","persistent-hint":""},model:{value:e.editedItem.refType,callback:function(t){e.$set(e.editedItem,"refType",t)},expression:"editedItem.refType"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-select",{attrs:{items:e.year,label:"Year"},model:{value:e.editedItem.year,callback:function(t){e.$set(e.editedItem,"year",t)},expression:"editedItem.year"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-select",{attrs:{items:e.branch,"item-text":"name","item-value":"brCode","menu-props":{maxHeight:"400"},label:"BRANCH",hint:"Set the casefile branch","persistent-hint":""},model:{value:e.editedItem.branch,callback:function(t){e.$set(e.editedItem,"branch",t)},expression:"editedItem.branch"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-select",{attrs:{items:e.insurer,"item-text":"name","item-value":"insCode","menu-props":{maxHeight:"400"},label:"INSURER",hint:"Set the casefile insurer","persistent-hint":""},model:{value:e.editedItem.insurer,callback:function(t){e.$set(e.editedItem,"insurer",t)},expression:"editedItem.insurer"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{rules:[function(e){return!!e||"Insurers reference is required"}],label:"Insurers Reference",required:""},model:{value:e.editedItem.claimNo,callback:function(t){e.$set(e.editedItem,"claimNo",t)},expression:"editedItem.claimNo"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{rules:[function(e){return!!e||"Vehicle Number is required"}],label:"Vehicle Number Reference",required:""},model:{value:e.editedItem.vehicleNo,callback:function(t){e.$set(e.editedItem,"vehicleNo",t)},expression:"editedItem.vehicleNo"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[[a("div",[a("v-menu",{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,s=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{value:e.computedDateFormattedMomentjs,clearable:"",label:"Date Of Loss","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(t){e.date=null}},model:{value:e.editedItem.dateOfLoss,callback:function(t){e.$set(e.editedItem,"dateOfLoss",t)},expression:"editedItem.dateOfLoss"}},"v-text-field",s,!1),i))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-date-picker",{attrs:{value:e.computedDateFormattedMomentjs},on:{change:function(t){e.menu=!1}},model:{value:e.editedItem.dateOfLoss,callback:function(t){e.$set(e.editedItem,"dateOfLoss",t)},expression:"editedItem.dateOfLoss"}})],1)],1)]],2),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{rules:[function(e){return!!e||"Place of Loss is required"}],label:"Place of Loss",required:""},model:{value:e.editedItem.placeOfLoss,callback:function(t){e.$set(e.editedItem,"placeOfLoss",t)},expression:"editedItem.placeOfLoss"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{rules:[function(e){return!!e||"Insured Name is required"}],label:"Insured Name",required:""},model:{value:e.editedItem.insuredName,callback:function(t){e.$set(e.editedItem,"insuredName",t)},expression:"editedItem.insuredName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Insurers Comment"},model:{value:e.editedItem.insComment,callback:function(t){e.$set(e.editedItem,"insComment",t)},expression:"editedItem.insComment"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-btn",{staticClass:"mt-3",attrs:{disabled:e.isAddButtonDisabled,color:"primary"},on:{click:e.saveCasefile}},[e._v("Submit")])],1)],1)],1)],1)],1)],1),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[e._v("Are you sure you want to delete the casefile with id "+e._s(e.editedItem.id)+"?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("OK")]),a("v-spacer")],1)],1)],1),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]},proxy:!0},{key:"item.numbering",fn:function(t){return[e._v(" "+e._s(t.index+1)+" ")]}},{key:"item.id",fn:function(t){var i=t.item;return[a("tr",[e._v(" AA/"+e._s(i.refType)+"/"+e._s(i.id)+"/"+e._s(i.year)+"/"+e._s(i.branch)+" ")])]}},{key:"item.dateOfLoss",fn:function(t){var i=t.item;return[e._v(" "+e._s(e.formatDate(i.dateOfLoss))+" ")]}},{key:"item.actions",fn:function(t){var i=t.item;return[a("v-tooltip",{attrs:{left:"",transition:"fab-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-icon",e._g(e._b({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(i)}}},"v-icon",n,!1),s),[e._v(" mdi-pencil ")])]}}],null,!0)},[a("span",[e._v(" edit")])]),a("v-tooltip",{attrs:{right:"",transition:"fab-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-icon",e._g(e._b({attrs:{small:"",color:"red darken-1"},on:{click:function(t){return e.deleteItem(i)}}},"v-icon",n,!1),s),[e._v(" mdi-delete ")])]}}],null,!0)},[a("span",[e._v(" delete")])])]}}],null,!0)})],1)])},s=[],n=(i("d81d"),i("b0c0"),i("fde1")),r=i("cb28"),d=i("5632"),o=i("f0cc"),l=i("c1df"),c=i.n(l),m={name:"casefiles",data:function(){return{dialog:!1,dialogDelete:!1,casefiles:[],search:"",date:null,menu:!1,branch:[],refType:[],insurer:[],year:["2018","2019","2020","2021","2022"],defaultItem:{id:null,refType:"",year:"",branch:"",insurer:"",claimNo:"",vehicleNo:"",dateOfLoss:"",placeOfLoss:"",insuredName:"",insComment:"",createdBy:"",fileStatus:"NEW"},editedIndex:-1,editedItem:{id:null,refType:"",year:"",branch:"",insurer:"",claimNo:"",vehicleNo:"",dateOfLoss:"",placeOfLoss:"",insuredName:"",insComment:"",createdBy:"",fileStatus:"NEW"},headers:[{text:"NO.",align:"start",sortable:!1,value:"numbering"},{text:"INSURER",align:"center",value:"insurer",sortable:!1},{text:"VEHICLE NO.",align:"center",value:"vehicleNo",sortable:!1},{text:"AASB REFERENCE",align:"center",value:"id",sortable:!1},{text:"CLAIM NO.",align:"start",sortable:!1,value:"claimNo"},{text:"DATE OF LOSS",align:"start",sortable:!1,value:"dateOfLoss"},{text:"STATUS",align:"center",value:"fileStatus",sortable:!1},{text:"ACTIONS",align:"center",value:"actions",sortable:!1}]}},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"},isAddButtonDisabled:function(){return!(this.editedItem.refType&&this.editedItem.year&&this.editedItem.branch&&this.editedItem.insurer&&this.editedItem.claimNo&&this.editedItem.vehicleNo&&this.editedItem.dateOfLoss&&this.editedItem.placeOfLoss&&this.editedItem.insuredName&&this.editedItem.insComment&&this.editedItem.fileStatus)},computedDateFormattedMomentjs:function(){return this.date?c()(this.date).format("yyyy-MM-dd"):""}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},methods:{formatDate:function(e){return c()(e).format("DD/MMM/YY")},retrieveCasefiles:function(){var e=this;o["a"].getAll().then((function(t){e.casefiles=t.data})).catch((function(e){console.log(e)}))},refreshList:function(){this.retrieveCasefiles()},retrieveDept:function(){var e=this;r["a"].getAll().then((function(t){e.refType=t.data})).catch((function(e){console.log(e)}))},retrieveIns:function(){var e=this;d["a"].getAll().then((function(t){e.insurer=t.data})).catch((function(e){console.log(e)}))},save:function(e){this.$refs.menu.save(e)},retrieveBranches:function(){var e=this;n["a"].getAll().then((function(t){e.branch=t.data.map(e.getDisplayBranch)})).catch((function(e){console.log(e)}))},getDisplayBranch:function(e){return{id:e.id,name:e.name.length>30?e.name.substr(0,30)+"...":e.name,brCode:e.brCode.length>30?e.brCode.substr(0,30)+"...":e.brCode}},editItem:function(e){this.editedIndex=this.casefiles.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.editedIndex=this.casefiles.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(){var e=this;o["a"].delete(this.editedItem.id).then((function(t){e.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:t&&t.data&&t.data.message||toString()}),e.refreshList()})).catch((function(e){console.log(e)})),this.closeDelete()},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},saveCasefile:function(){var e=this;if(this.editedIndex>-1)o["a"].update(this.editedItem.id,this.editedItem).then((function(t){e.close(),e.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()}),e.refreshList()})).catch((function(e){console.log(e)}));else{var t={refType:this.editedItem.refType,year:this.editedItem.year,branch:this.editedItem.branch,insurer:this.editedItem.insurer,claimNo:this.editedItem.claimNo,vehicleNo:this.editedItem.vehicleNo,dateOfLoss:this.editedItem.dateOfLoss,placeOfLoss:this.editedItem.placeOfLoss,insuredName:this.editedItem.insuredName,insComment:this.editedItem.insComment,createdBy:this.$store.state.auth.user.username,fileStatus:this.editedItem.fileStatus};o["a"].create(t).then((function(t){e.editedItem.id=t.data.id,e.close(),e.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()}),e.refreshList()})).catch((function(t){e.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})}))}this.close()}},mounted:function(){this.retrieveBranches(),this.retrieveDept(),this.retrieveIns(),this.retrieveCasefiles()}},u=m,f=i("2877"),h=i("6544"),v=i.n(h),b=i("8336"),p=i("b0af"),I=i("99d9"),g=i("62ad"),x=i("a523"),y=i("8fea"),k=i("2e4b"),C=i("169a"),N=i("ce7e"),_=i("132d"),O=i("adda"),S=i("e449"),L=i("0fd9"),D=i("b974"),T=i("2fa4"),V=i("8654"),w=i("71d9"),A=i("3a2f"),$=Object(f["a"])(u,a,s,!1,null,null,null);t["default"]=$.exports;v()($,{VBtn:b["a"],VCard:p["a"],VCardActions:I["a"],VCardText:I["b"],VCardTitle:I["c"],VCol:g["a"],VContainer:x["a"],VDataTable:y["a"],VDatePicker:k["a"],VDialog:C["a"],VDivider:N["a"],VIcon:_["a"],VImg:O["a"],VMenu:S["a"],VRow:L["a"],VSelect:D["a"],VSpacer:T["a"],VTextField:V["a"],VToolbar:w["a"],VTooltip:A["a"]})}}]);
//# sourceMappingURL=chunk-2d0cefae.9c3caff4.js.map